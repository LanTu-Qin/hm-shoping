(function(){"use strict";var t={6619:function(t,e,s){var a=s(6848),o=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},i=[],n={},r=n,c=s(1656),l=(0,c.A)(r,o,i,!1,null,null,null),d=l.exports,u=s(6178),h=function(){var t=this,e=t._self._c;return e("div",[e("router-view"),e("van-tabbar",{attrs:{"active-color":"#ee0a24","inactive-color":"#000",route:"",placeholder:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[e("van-tabbar-item",{attrs:{replace:"",to:"/home",icon:"wap-home-o"}},[t._v("首页")]),e("van-tabbar-item",{attrs:{replace:"",to:"/category",icon:"apps-o"}},[t._v("分类")]),e("van-tabbar-item",{attrs:{replace:"",to:"/cart",icon:"shopping-cart-o"}},[t._v("购物车")]),e("van-tabbar-item",{attrs:{replace:"",to:"/user",icon:"user-o"}},[t._v("我的")])],1)],1)},m=[],v={name:"LayoutIndex",data(){return{active:0}},created(){},updated(){}},p=v,g=(0,c.A)(p,h,m,!1,null,null,null),f=g.exports,y=function(){var t=this,e=t._self._c;return e("div",[e("van-nav-bar",{attrs:{title:"会员登录","left-arrow":""},on:{"click-left":t.onClickLeft}}),e("div",{staticClass:"content"},[e("h1",[t._v("手机号登录")]),e("span",{staticClass:"prompt"},[t._v("未注册的手机号登录后将自动注册")]),e("van-cell-group",[e("van-field",{attrs:{placeholder:"请输入手机号"},model:{value:t.tel,callback:function(e){t.tel=e},expression:"tel"}}),e("van-field",{attrs:{placeholder:"请输入图形验证码"},scopedSlots:t._u([{key:"button",fn:function(){return[e("van-button",{staticClass:"image",attrs:{icon:t.identifyPic},on:{click:t.getPicCode}})]},proxy:!0}]),model:{value:t.identifyImg,callback:function(e){t.identifyImg=e},expression:"identifyImg"}}),e("van-field",{attrs:{placeholder:"请输入短信验证码"},scopedSlots:t._u([{key:"button",fn:function(){return[t.unsend?e("van-button",{ref:"messageButton",attrs:{size:"small",type:"primary"},on:{click:t.sendMessage}},[t._v("获取验证码")]):e("van-count-down",{ref:"countDown",attrs:{time:6e4,format:"重新发送（ss）","auto-start":!1},on:{finish:t.finish}})]},proxy:!0}]),model:{value:t.identifyEmil,callback:function(e){t.identifyEmil=e},expression:"identifyEmil"}})],1),e("div",{staticClass:"login"},[e("van-button",{attrs:{type:"primary",size:"large",round:""},on:{click:t.login}},[t._v("登录")])],1)],1)],1)},_=[],C=(s(9704),s(1981)),b=s(4373);const k="hm_shopping_info",A="user_search_history",x=()=>{const t={token:"",userId:""},e=localStorage.getItem(k);return e?JSON.parse(e):t},w=t=>{localStorage.setItem(k,JSON.stringify(t))},I=()=>{localStorage.removeItem(k)},L=()=>{const t=[],e=localStorage.getItem(A);return e?JSON.parse(e):t},S=t=>{localStorage.setItem(A,JSON.stringify(t))},$=b.A.create({baseURL:"https://smart-shop.itheima.net/index.php?s=/api/",timeout:1e3});$.interceptors.request.use((function(t){C.A.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"});const e=x().token;return e&&(t.headers["Access-Token"]=e,t.headers.platform="H5"),t}),(function(t){return Promise.reject(t)})),$.interceptors.response.use((function(t){const e=t.data;return 200!==e.status&&(0,C.A)(e.message),C.A.clear(),e}),(function(t){return Promise.reject(t)}));var T=$;const P=async()=>T.get("/captcha/image"),O=async t=>T.post("/captcha/sendSmsCaptcha",t),N=async t=>T.post("/passport/login",{form:t});var j={name:"LoginIndex",data(){return{tel:"",identifyImg:"",identifyPic:"",identifyKey:"",identifyEmil:"",reg_tel:/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/,reg_img:/^[A-Za-z0-9]{4}$/,reg_message:/^\d{6}$/,unsend:!0}},async created(){this.getPicCode()},methods:{async getPicCode(){const{data:{base64:t,key:e}}=await P();this.identifyPic=t,this.identifyKey=e},vaildFn(){return this.reg_tel.test(this.tel)?!!this.reg_img.test(this.identifyImg)||(this.$toast("请输入正确的验证码"),!1):(this.$toast("请输入正确的手机号"),!1)},async sendMessage(){if(this.vaildFn()){this.$toast("短信验证码已发送，请注意查收");const t=await O({captchaCode:this.identifyPic,captchaKey:this.identifyKey,mobile:this.tel});200===t.status&&(this.identifyEmil=246810),this.unsend=!1,setTimeout((()=>{this.$refs.countDown.start()}),0)}},finish(){this.$refs.countDown.reset(),this.unsend=!0},async login(){if(this.vaildFn&&this.reg_message.test(this.identifyEmil)){const t=await N({isParty:!1,mobile:this.tel,partyData:{},smsCode:this.identifyEmil});this.$store.commit("user/setUserInfo",t.data),this.$toast("登录成功");const e=this.$route.query.backUrl||"/";this.$router.replace(e)}},onClickLeft(){this.$router.go(-1)}}},E=j,q=(0,c.A)(E,y,_,!1,null,"7c247658",null),B=q.exports,U=function(){var t=this,e=t._self._c;return e("div",[t._v("我是MyOrder")])},D=[],K={name:"MyOrderIndex"},F=K,M=(0,c.A)(F,U,D,!1,null,null,null),z=M.exports,J=function(){var t=this,e=t._self._c;return e("div",{staticClass:"payIndex"},[e("van-nav-bar",{attrs:{title:"订单结算台","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}}}),e("div",{staticClass:"addressArea"},[e("div",{staticClass:"icon"},[e("van-icon",{attrs:{name:"logistics"}})],1),e("div",{staticClass:"text"},[e("div",{staticClass:"name"},[t._v(t._s(t.addressList[0].name+t.addressList[0].phone))]),e("div",{staticClass:"address"},[t._v(t._s(t.longAddress))])]),e("div",{staticClass:"icon"},[e("van-icon",{attrs:{name:"arrow"}})],1)]),e("div",{staticClass:"goodList"},t._l(t.order.goodsList,(function(t){return e("van-card",{key:t.goods_id,attrs:{title:t.goods_name,price:t.goods_price,num:t.total_num,thumb:t.goods_image}})})),1),e("div",{staticClass:"total"},[e("div",{staticClass:"all"},[e("span",[t._v("共"+t._s(t.order.orderTotalNum)+"件商品，合计："),e("span",{staticClass:"price"},[t._v("￥"+t._s(t.order.orderTotalPrice))])])])]),e("van-cell-group",{staticClass:"cost"},[e("van-cell",{attrs:{title:"订单总金额："},scopedSlots:t._u([{key:"default",fn:function(){return[e("span",{staticClass:"price"},[t._v("￥"+t._s(t.order.orderTotalPrice))])]},proxy:!0}])}),e("van-cell",{attrs:{title:"优惠券：",value:"无优惠卷可用"}}),e("van-cell",{attrs:{title:"配送费用："},scopedSlots:t._u([{key:"default",fn:function(){return[e("span",{staticClass:"price"},[t._v("+￥0.00")])]},proxy:!0}])})],1),e("van-cell-group",{staticClass:"payType"},[e("van-cell",{attrs:{value:"支付方式"}}),e("van-cell",{attrs:{icon:"balance-o"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" 余额支付（可用￥"+t._s(t.personal.balance)+"元） ")]},proxy:!0},{key:"right-icon",fn:function(){return[e("van-icon",{staticClass:"passed-icon",attrs:{name:"passed"}})]},proxy:!0}])})],1),e("van-field",{attrs:{label:"买家留言",type:"text",placeholder:"选填:对本次交易的说明",maxlength:"50",clearable:"",centered:""},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),e("van-submit-bar",{staticClass:"submit safe-area-inset-bottom",attrs:{"button-text":"提交订单"},on:{submit:t.onSubmit},scopedSlots:t._u([{key:"default",fn:function(){return[e("div",{staticStyle:{"font-size":"4vw",color:"#888"}},[t._v(" 实付款："),e("span",{staticStyle:{color:"red","font-weight":"bold"}},[t._v("￥"+t._s(t.order.orderTotalPrice))])])]},proxy:!0}])})],1)},H=[];const R=()=>T.get("address/list"),Z=(t,e)=>T.get("checkout/order",{params:{mode:t,delivery:10,shopId:0,couponId:0,isUsePoints:0,...e}});var G={name:"PayIndex",data(){return{addressList:[],message:"",order:{},personal:{}}},computed:{longAddress(){const t=this.addressList[0].region;return t.city+t.province+t.region+this.addressList[0].detail},mode(){return this.$route.query.mode},cartIds(){return this.$route.query.cartIds},obj(){return JSON.parse(this.$route.query.obj)}},created(){this.getADList(),this.getcartOrder()},methods:{onSubmit(){this.$toast("订单已提交")},async getADList(){const t=await R();this.addressList=t.data.list,console.log(this.addressList)},async getcartOrder(){console.log(this.mode),"cart"===this.mode?console.log(this.cartIds):console.log(this.obj);const{data:{order:t,personal:e}}=await Z(this.mode,"cart"===this.mode?{cartIds:this.cartIds}:this.obj);this.order=t,this.personal=e,console.log(t),console.log(e)}}},Q=G,V=(0,c.A)(Q,J,H,!1,null,"b8013bce",null),W=V.exports,X=(s(4114),function(){var t=this,e=t._self._c;return e("div",{staticClass:"prodetail"},[e("van-nav-bar",{attrs:{fixed:"",title:"商品详情页","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}}}),e("van-swipe",{attrs:{autoplay:3e3},on:{change:t.onChange},scopedSlots:t._u([{key:"indicator",fn:function(){return[e("div",{staticClass:"custom-indicator"},[t._v(t._s(t.current+1)+" / "+t._s(t.images.length))])]},proxy:!0}])},t._l(t.images,(function(t,s){return e("van-swipe-item",{key:s},[e("img",{attrs:{src:t.external_url}})])})),1),e("div",{staticClass:"info"},[e("div",{staticClass:"title"},[e("div",{staticClass:"price"},[e("span",{staticClass:"now"},[t._v("￥"+t._s(t.detail.goods_price_min))]),e("span",{staticClass:"oldprice"},[t._v("￥"+t._s(t.detail.line_price_max))])]),e("div",{staticClass:"sellcount"},[t._v("已售"+t._s(t.detail.goods_sales)+"件")])]),e("div",{staticClass:"msg text-ellipsis-2"},[t._v(" "+t._s(t.detail.goods_name)+" ")]),e("div",{staticClass:"service"},[e("div",{staticClass:"left-words"},[e("span",[e("van-icon",{attrs:{name:"passed"}}),t._v("七天无理由退货")],1),e("span",[e("van-icon",{attrs:{name:"passed"}}),t._v("48小时发货")],1)]),e("div",{staticClass:"right-icon"},[e("van-icon",{attrs:{name:"arrow"}})],1)])]),e("div",{staticClass:"comment"},[e("div",{staticClass:"comment-title"},[e("div",{staticClass:"left"},[t._v("商品评价 ("+t._s(t.totalcomment)+"条)")]),e("div",{staticClass:"right"},[t._v("查看更多 "),e("van-icon",{attrs:{name:"arrow"}})],1)]),e("div",{staticClass:"comment-list"},t._l(t.commentList,(function(s){return e("div",{key:s.comment_id,staticClass:"comment-item"},[e("div",{staticClass:"top"},[e("img",{attrs:{src:s.user.avatar_url||t.defaultImage,alt:""}}),e("div",{staticClass:"name"},[t._v(t._s(s.user.nick_name))]),e("van-rate",{attrs:{size:16,value:s.score/2,color:"#ffd21e","void-icon":"star","void-color":"#eee"}})],1),e("div",{staticClass:"content"},[t._v(" "+t._s(s.content)+" ")]),e("div",{staticClass:"time"},[t._v(" "+t._s(s.create_time)+" ")])])})),0)]),e("div",{staticClass:"desc",domProps:{innerHTML:t._s(t.detail.content)}}),e("div",{staticClass:"footer"},[e("div",{staticClass:"icon-home",on:{click:function(e){return t.$router.push("/")}}},[e("van-icon",{attrs:{name:"wap-home-o"}}),e("span",[t._v("首页")])],1),e("div",{staticClass:"icon-cart",on:{click:function(e){return t.$router.push("/cart")}}},[e("van-icon",{attrs:{name:"shopping-cart-o",badge:t.cartTotal}}),e("span",[t._v("购物车")])],1),e("div",{staticClass:"btn-add",on:{click:t.addFn}},[t._v("加入购物车")]),e("div",{staticClass:"btn-buy",on:{click:t.buyFn}},[t._v("立刻购买")])]),e("van-action-sheet",{attrs:{title:"cart"===t.mode?"加入购物车":"立刻购买"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[e("div",{staticClass:"product"},[e("div",{staticClass:"product-title"},[e("div",{staticClass:"left"},[e("img",{attrs:{src:t.detail.goods_image,alt:""}})]),e("div",{staticClass:"right"},[e("div",{staticClass:"price"},[e("span",[t._v("¥")]),e("span",{staticClass:"nowprice"},[t._v(t._s(t.detail.goods_price_min))])]),e("div",{staticClass:"count"},[e("span",[t._v("库存")]),e("span",[t._v(t._s(t.detail.stock_total))])])])]),e("div",{staticClass:"num-box"},[e("span",[t._v("数量")]),e("CountBox",{model:{value:t.addcount,callback:function(e){t.addcount=e},expression:"addcount"}})],1),t.detail.stock_total>0?e("div",{staticClass:"showbtn"},["cart"===t.mode?e("div",{staticClass:"btn",on:{click:t.addCart}},[t._v("加入购物车")]):e("div",{staticClass:"btn now",on:{click:t.buyNow}},[t._v("立刻购买")])]):e("div",{staticClass:"btn-none"},[t._v("该商品已抢完")])])])],1)}),Y=[];const tt=t=>{const{sortType:e,sortPrice:s,categoryId:a,goodsName:o,page:i}=t;return T.get("/goods/list",{params:{sortType:e,sortPrice:s,categoryId:a,goodsName:o,page:i}})},et=t=>T.get("goods/detail",{params:{goodsId:t}}),st=(t,e)=>T.get("comment/listRows",{params:{goodsId:t,limit:e}});var at=function(){var t=this,e=t._self._c;return e("div",{staticClass:"count-box"},[e("van-stepper",{attrs:{value:t.value},on:{change:t.onChange}})],1)},ot=[],it={name:"countBox",props:{value:{type:Number,default:1}},methods:{onChange(t){this.$emit("input",t),event.stopPropagation()}}},nt=it,rt=(0,c.A)(nt,at,ot,!1,null,null,null),ct=rt.exports,lt=(s(4867),s(4380)),dt={data(){return{}},methods:{loginConfirm(){if(""===x().token)return lt.A.confirm({title:"温馨提示",message:"此时需要先登入才能继续操作哦~",confirmButtonText:"去登入",cancelButtonText:"再逛逛"}).then((()=>{this.$router.push({path:"/login",query:{backUrl:this.$route.fullPath}})})).catch((()=>{})),!1}}};const ut=(t,e,s)=>T.post("cart/add",{goodsId:t,goodsNum:e,goodsSkuId:s}),ht=()=>T.get("cart/total"),mt=()=>T.get("cart/list"),vt=(t,e,s)=>T.post("cart/update",{goodsId:t,goodsNum:e,goodsSkuId:s}),pt=t=>T.post("cart/clear",{cartIds:t});var gt={name:"ProDetail",components:{CountBox:ct},data(){return{images:[],current:0,detail:{},commentList:[],totalcomment:0,defaultImage:"https://smart-shop.itheima.net/static/default-avatar.png",show:!1,mode:"cart",addcount:1,cartTotal:0}},mixins:[dt],computed:{goodsId(){return this.$route.params.id}},created(){this.getDetail(),this.getComment(),this.getCartTotal()},methods:{onChange(t){this.current=t},async getDetail(){const{data:{detail:t}}=await et(this.goodsId);this.detail=t,this.images=t.goods_images,console.log(this.detail)},async getComment(){const{data:{list:t,total:e}}=await st(this.goodsId,5);this.commentList=t,this.totalcomment=e},async getCartTotal(){const{data:{cartTotal:t}}=await ht();this.cartTotal=t},addFn(){this.show=!0,this.mode="cart"},buyFn(){this.show=!0,this.mode="buynow"},async addCart(){if(!1===this.loginConfirm())return;const{data:{cartTotal:t}}=await ut(this.goodsId,this.addcount,this.detail.skuList[0].goods_sku_id);(0,C.A)("加入购物车成功"),this.cartTotal=t,this.show=!1},buyNow(){!1!==this.loginConfirm()&&this.$router.push({path:"/pay",query:{mode:"buyNow",obj:JSON.stringify({goodsId:this.detail.goods_id,goodsNum:this.addcount,goodsSkuId:this.detail.skuList[0].goods_sku_id})}})}}},ft=gt,yt=(0,c.A)(ft,X,Y,!1,null,"3e99eac6",null),_t=yt.exports,Ct=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search"},[e("van-nav-bar",{attrs:{title:"商品搜索","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}}}),e("form",{attrs:{action:"/"}},[e("van-search",{attrs:{"show-action":"",placeholder:"请输入搜索关键词",clearable:""},on:{search:t.search_1},scopedSlots:t._u([{key:"action",fn:function(){return[e("div",{on:{click:t.search_1}},[t._v("搜索")])]},proxy:!0}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t.history.length>0?e("div",{staticClass:"search-history"},[e("div",{staticClass:"title"},[e("span",[t._v("最近搜索")]),e("van-icon",{attrs:{name:"delete-o",size:"16"},on:{click:t.clear}})],1),e("div",{staticClass:"list"},t._l(t.history,(function(s){return e("div",{key:s,staticClass:"list-item",on:{click:t.search_2}},[t._v(t._s(s))])})),0)]):t._e()],1)},bt=[],kt=(s(8111),s(2489),{name:"SearchIndex",data:()=>({value:"",history:L()}),methods:{search_1(){""===this.value?(0,C.A)("请输入你想搜索的商品"):(this.history=this.history.filter((t=>t!==this.value)),this.history.unshift(this.value),S(this.history),console.log(this.history),this.$router.push(`/searchlist?search=${this.value}`))},search_2(t){t=t.target.innerText,this.value=t,this.history.splice(this.history.findIndex((e=>e===t)),1),this.history.unshift(t),S(this.history),this.$router.push(`/searchlist?search=${this.value}`)},clear(){this.history=[],S(this.history)}}}),At=kt,xt=(0,c.A)(At,Ct,bt,!1,null,"47544d08",null),wt=xt.exports,It=function(){var t=this,e=t._self._c;return e("div",{staticClass:"searchList"},[e("van-nav-bar",{attrs:{title:"商品列表","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}}}),e("van-search",{attrs:{readonly:"",shape:"round",background:"#ffffff",value:t.querySearch||"搜索商品","show-action":""},on:{click:function(e){return t.$router.push("/search")}},scopedSlots:t._u([{key:"action",fn:function(){return[e("van-icon",{staticClass:"tool",attrs:{name:"apps-o"}})]},proxy:!0}])}),e("van-tabs",{on:{click:t.changeSort},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[e("van-tab",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("综合")]},proxy:!0}])},t._l(t.productlist,(function(t){return e("gooditems",{key:t.goods_id,attrs:{item:t}})})),1),e("van-tab",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("销量")]},proxy:!0}])},t._l(t.productlist,(function(t){return e("gooditems",{key:t.goods_id,attrs:{item:t}})})),1),e("van-tab",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("价格"),e("div",{staticClass:"arrow"},[e("van-icon",{attrs:{name:"arrow-up"}}),e("van-icon",{attrs:{name:"arrow-down"}})],1)]},proxy:!0}])},t._l(t.productlist,(function(t){return e("gooditems",{key:t.goods_id,attrs:{item:t}})})),1)],1)],1)},Lt=[],St=function(){var t=this,e=t._self._c;return e("div",{staticClass:"goodItems"},[e("van-card",{attrs:{price:t.item.goods_price_max,desc:"已售"+t.item.goods_sales+"件",title:t.item.goods_name,thumb:t.item.goods_image,"origin-price":t.item.line_price_max},on:{click:function(e){return t.$router.push(`/paodetail/${t.item.goods_id}`)}}})],1)},$t=[],Tt={name:"goodItem",props:{item:{type:Object,default:()=>({})}}},Pt=Tt,Ot=(0,c.A)(Pt,St,$t,!1,null,"77c5c979",null),Nt=Ot.exports,jt={name:"ListIndex",data(){return{active:0,sortprice:1,sorttype:["all","sales","price"],goodsname:"",page:1,productlist:[]}},components:{gooditems:Nt},computed:{querySearch(){return this.$route.query.search}},created(){this.getProductList()},methods:{changeSort(){const t=document.querySelectorAll(".arrow .van-icon");2===this.active?(this.sortprice=(this.sortprice+1)%2,0===this.sortprice?(t[0].classList.add("active"),t[1].classList.remove("active"),this.getProductList()):(t[1].classList.add("active"),t[0].classList.remove("active"),this.getProductList())):(this.sortprice=1,t[1].classList.remove("active"),t[0].classList.remove("active"),this.getProductList())},async getProductList(){const{data:{list:t}}=await tt({categoryId:this.$route.query.categoryId,sortPrice:this.sortprice,goodsName:this.querySearch,sortType:this.sorttype[this.active],page:this.page});this.productlist=t.data}}},Et=jt,qt=(0,c.A)(Et,It,Lt,!1,null,"62351c80",null),Bt=qt.exports,Ut=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("van-sticky",[e("van-nav-bar",{attrs:{title:"智慧商城"}})],1),e("van-search",{attrs:{shape:"round",placeholder:"搜索你要找的商品"},on:{click:function(e){return t.$router.push("/search")}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),e("van-swipe",{staticClass:"my-swipe",attrs:{autoplay:3e3,"indicator-color":"white"}},t._l(t.bannerList,(function(t){return e("van-swipe-item",{key:t.imgUrl},[e("img",{attrs:{src:t.imgUrl,alt:""}})])})),1),e("van-notice-bar",{attrs:{color:"#fff",background:"rgb(82, 82, 82)",scrollable:"","left-icon":"volume-o",text:t.noticeBar}}),e("van-grid",{attrs:{"column-num":5}},t._l(t.gridBar,(function(t){return e("van-grid-item",{key:t.imgUrl,attrs:{icon:t.imgUrl,text:t.text}})})),1),e("div",{staticClass:"main"},[e("img",{attrs:{src:t.bigImg,alt:""}})]),e("van-divider",{style:{color:"#000",borderColor:"#000"}},[t._v("猜你喜欢")]),t._l(t.goodList,(function(t){return e("goodItems",{key:t.goods_id,attrs:{item:t}})}))],2)},Dt=[];const Kt=()=>T.get("/page/detail");var Ft={name:"HomeIndex",data:()=>({value:"",bannerList:[],noticeBar:"",gridBar:[],bigImg:"",item:{},goodList:[]}),components:{goodItems:Nt},async created(){const{data:{pageData:{items:t}}}=await Kt();console.log(t),this.bannerList=t[1].data,this.noticeBar=t[2].params.text,this.gridBar=t[3].data,this.bigImg=t[4].data[0].imgUrl,this.goodList=t[6].data}},Mt=Ft,zt=(0,c.A)(Mt,Ut,Dt,!1,null,"383262b2",null),Jt=zt.exports,Ht=function(){var t=this,e=t._self._c;return e("div",{staticClass:"category"},[e("van-nav-bar",{attrs:{title:"全部分类"}}),e("van-search",{attrs:{readonly:"",shape:"round",background:"#ffffff",value:"搜索商品"},on:{click:function(e){return t.$router.push("/search")}}}),e("div",{staticClass:"sidebar"},[e("van-sidebar",{on:{change:t.onChange},model:{value:t.activeKey,callback:function(e){t.activeKey=e},expression:"activeKey"}},t._l(t.categoryList,(function(t){return e("van-sidebar-item",{key:t.category_id,attrs:{title:t.name}})})),1),e("div",{staticClass:"commodity"},t._l(t.categoryList[t.activeKey].children,(function(s){return e("div",{key:s.category_id,staticClass:"cate-goods",on:{click:function(e){return t.$router.push(`/searchlist?categoryId=${s.category_id}`)}}},[e("img",{attrs:{src:s.image.external_url,alt:""}}),e("p",[t._v(t._s(s.name))])])})),0)],1)],1)},Rt=[];const Zt=()=>T.get("category/list");var Gt={name:"CategoryIndex",data(){return{activeKey:0,categoryList:[]}},methods:{onChange(t){}},async created(){const t=await Zt();this.categoryList=t.data.list,console.log(t.data.list)}},Qt=Gt,Vt=(0,c.A)(Qt,Ht,Rt,!1,null,"d35ade54",null),Wt=Vt.exports,Xt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cart"},[e("van-nav-bar",{attrs:{title:"购物车"}}),t.isLogin&&t.cartList.length>0?e("div",[e("div",{staticClass:"banner"},[e("div",{staticClass:"totalAndChange"},[e("div",{staticClass:"total"},[t._v("共"),e("span",{staticStyle:{color:"red"}},[t._v(t._s(t.cartTotal))]),t._v("件商品")]),e("div",{staticClass:"change",on:{click:function(e){t.isEdit=!t.isEdit}}},[e("van-icon",{attrs:{name:"edit"}}),t._v("编辑")],1)]),t._l(t.cartList,(function(s){return e("div",{key:s.goods_id},[e("van-checkbox",{attrs:{value:s.isChecked},on:{click:function(e){return t.toggleCheck(s.goods_id)}}},[e("van-card",{attrs:{title:s.goods.goods_name,thumb:s.goods.goods_image},scopedSlots:t._u([{key:"price",fn:function(){return[t._v(" ￥"+t._s(s.goods.goods_price_min)+" ")]},proxy:!0},{key:"num",fn:function(){return[e("CountBox",{attrs:{value:s.goods_num},on:{input:e=>t.changeCount(e,s.goods_id,s.goods_sku_id)}})]},proxy:!0}],null,!0)})],1)],1)}))],2),t.isEdit?e("van-submit-bar",{attrs:{price:100*t.selPrice,"button-text":"删除",disabled:0===t.selCount,"safe-area-inset-bottom":""},on:{submit:t.handleDelete}},[e("van-checkbox",{attrs:{value:t.isAllChecked},on:{click:t.AllChecked}},[t._v("全选")])],1):e("van-submit-bar",{attrs:{price:100*t.selPrice,"button-text":"结算("+t.selCount+")",disabled:0===t.selCount,"safe-area-inset-bottom":""},on:{submit:t.onSubmit}},[e("van-checkbox",{attrs:{value:t.isAllChecked},on:{click:t.AllChecked}},[t._v("全选")])],1)],1):e("div",{staticClass:"empty"},[e("img",{staticClass:"emptyImg",attrs:{src:"https://img.ixintu.com/download/jpg/20200905/b37f4527019300b3af7df25202c3ff38_512_512.jpg!ys",alt:""}}),e("div",{staticClass:"emptyTips"},[t._v("您的购物车是空的，快去逛逛吧")]),e("van-button",{attrs:{type:"primary",to:"/",color:"red",round:""}},[t._v("去逛逛")])],1)],1)},Yt=[],te=(s(1701),s(3518)),ee={name:"CartIndex",components:{CountBox:ct},data(){return{isEdit:!1}},created(){this.isLogin&&this.$store.dispatch("cart/getCartAction")},computed:{...(0,te.aH)("cart",["cartList","cartTotal"]),...(0,te.L8)("cart",["cartTotalNum","selCartList","selCount","selPrice","isAllChecked"]),isLogin(){return""!==this.$store.state.user.userInfo.token}},methods:{onSubmit(){this.$router.push({path:"/pay",query:{mode:"cart",cartIds:this.selCartList.map((t=>t.id)).join(",")}})},toggleCheck(t){this.$store.commit("cart/toggleCheck",t)},AllChecked(){this.$store.commit("cart/AllChecked",!this.isAllChecked)},async changeCount(t,e,s){this.$store.dispatch("cart/changeCountAction",{goodsId:e,goodsNum:t,goodsSku:s})},handleDelete(){0!==this.selCount&&(console.log(this.selCartList.map((t=>t.id))),this.$store.dispatch("cart/deleteSelect",this.selCartList.map((t=>t.id))),this.isEdit=!1)}},watch:{isEdit:{handler(t){console.log(t),t?this.$store.commit("cart/AllChecked",!1):this.$store.commit("cart/AllChecked",!0)},deep:!0,immediate:!0}}},se=ee,ae=(0,c.A)(se,Xt,Yt,!1,null,null,null),oe=ae.exports,ie=function(){var t=this,e=t._self._c;return e("div",[t._v("user")])},ne=[],re={name:"UserIndex"},ce=re,le=(0,c.A)(ce,ie,ne,!1,null,null,null),de=le.exports,ue={namespaced:!0,state(){return{userInfo:x()}},mutations:{setUserInfo(t,e){t.userInfor=e,w(e)},removeUserInfo(t){t.userInfor={token:"",userId:""},I()}},actions:{},getters:{}},he=(s(1148),s(116),s(7588),s(8237),{namespaced:!0,state(){return{cartList:[],cartTotal:0}},mutations:{newCartList(t,e){t.cartList=e.list,t.cartTotal=e.cartTotal},toggleCheck(t,e){const s=t.cartList.find((t=>t.goods_id===e));s.isChecked=!s.isChecked},AllChecked(t,e){t.cartList.forEach((t=>{t.isChecked=e}))},changeCount(t,e){const s=t.cartList.find((t=>t.goods_id===e.goodsId));s.goods_num=e.goodsNum}},actions:{async getCartAction(t){const{data:e}=await mt();e.list.forEach((t=>{t.isChecked=!0})),t.commit("newCartList",e)},async changeCountAction(t,e){const{goodsNum:s,goodsId:a,goodsSku:o}=e,i=await vt(a,s,o);200===i.status?t.commit("changeCount",{goodsNum:s,goodsId:a}):(0,C.A)("修改失败")},async deleteSelect(t,e){const s=await pt(e);200===s.status&&t.dispatch("getCartAction").then((0,C.A)("删除成功"))}},getters:{cartTotalNum(t){return t.cartList.reduce(((t,e)=>t+e.goods_num),0)},selCartList(t){return t.cartList.filter((t=>t.isChecked))},selCount(t,e){return e.selCartList.reduce(((t,e)=>t+e.goods_num),0)},selPrice(t,e){return e.selCartList.reduce(((t,e)=>t+e.goods_num*e.goods.goods_price_min),0)},isAllChecked(t){return t.cartList.every((t=>t.isChecked))}}});a.Ay.use(te.Ay);var me=new te.Ay.Store({state:{},getters:{},mutations:{},actions:{},modules:{user:ue,cart:he}});a.Ay.use(u.Ay);const ve=new u.Ay({routes:[{path:"/",component:f,redirect:"/home",children:[{path:"/home",component:Jt},{path:"/category",component:Wt},{path:"/cart",component:oe},{path:"/user",component:de}]},{path:"/login",component:B},{path:"/myorder",component:z},{path:"/pay",component:W},{path:"/paodetail/:id",component:_t},{path:"/search",component:wt},{path:"/searchlist",component:Bt}]}),pe=["/pay","/myorder"];ve.beforeEach(((t,e,s)=>{pe.includes(t.path)?""!==me.state.user.userInfo.token?s():s("/login"):s()}));var ge=ve,fe=(s(9809),s(4365)),ye=(s(6117),s(7555)),_e=(s(3425),s(6141)),Ce=(s(7231),s(9363)),be=(s(4510),s(1864)),ke=(s(6291),s(4249)),Ae=(s(4981),s(7877)),xe=(s(1215),s(5283)),we=(s(7057),s(6749)),Ie=(s(79),s(7235)),Le=(s(9125),s(2665)),Se=(s(9851),s(1431)),$e=(s(4650),s(3244)),Te=(s(1202),s(1080)),Pe=(s(3419),s(5660)),Oe=(s(1335),s(1387)),Ne=(s(3212),s(6874)),je=(s(5007),s(3882)),Ee=(s(440),s(162)),qe=(s(7219),s(1279)),Be=(s(7141),s(5497)),Ue=(s(9867),s(4648)),De=(s(7185),s(1946)),Ke=(s(2161),s(9471)),Fe=(s(7452),s(6254)),Me=(s(3025),s(9103)),ze=(s(5606),s(6732)),Je=(s(6530),s(932)),He=(s(4534),s(5232)),Re=(s(4368),s(6885)),Ze=(s(5807),s(1747));a.Ay.use(Ze.A),a.Ay.use(Re.A),a.Ay.use(He.A),a.Ay.use(Je.A),a.Ay.use(ze.A),a.Ay.use(Me.A),a.Ay.use(Fe.A),a.Ay.use(Ke.A),a.Ay.use(De.A),a.Ay.use(Ue.A),a.Ay.use(Be.A),a.Ay.use(qe.A),a.Ay.use(Ee.A),a.Ay.use(je.A),a.Ay.use(Ne.A),a.Ay.use(Oe.A),a.Ay.use(Pe.A),a.Ay.use(Te.A),a.Ay.use($e.A),a.Ay.use(Se.A),a.Ay.use(Le.A),a.Ay.use(Ie.A),a.Ay.use(we.A),a.Ay.use(xe.A),a.Ay.use(Ae.A),a.Ay.use(C.A),a.Ay.use(ke.A),a.Ay.use(be.A),a.Ay.use(Ce.A),a.Ay.use(_e.A),a.Ay.use(lt.A),a.Ay.use(ye.A),a.Ay.use(fe.A),a.Ay.config.productionTip=!1,new a.Ay({router:ge,store:me,render:t=>t(d)}).$mount("#app")}},e={};function s(a){var o=e[a];if(void 0!==o)return o.exports;var i=e[a]={exports:{}};return t[a].call(i.exports,i,i.exports,s),i.exports}s.m=t,function(){var t=[];s.O=function(e,a,o,i){if(!a){var n=1/0;for(d=0;d<t.length;d++){a=t[d][0],o=t[d][1],i=t[d][2];for(var r=!0,c=0;c<a.length;c++)(!1&i||n>=i)&&Object.keys(s.O).every((function(t){return s.O[t](a[c])}))?a.splice(c--,1):(r=!1,i<n&&(n=i));if(r){t.splice(d--,1);var l=o();void 0!==l&&(e=l)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[a,o,i]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var o,i,n=a[0],r=a[1],c=a[2],l=0;if(n.some((function(e){return 0!==t[e]}))){for(o in r)s.o(r,o)&&(s.m[o]=r[o]);if(c)var d=c(s)}for(e&&e(a);l<n.length;l++)i=n[l],s.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return s.O(d)},a=self["webpackChunkhm_shopping"]=self["webpackChunkhm_shopping"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(6619)}));a=s.O(a)})();
//# sourceMappingURL=app.0168e4b2.js.map